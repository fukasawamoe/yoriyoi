<main class="w-full flex justify-center">
  <%= form_with model: @form, url: tasks_path, method: :post, local: true do |f| %>
    <div class="form-container rounded">
      <div class="form-group m-8">
        <div class="mr-5">
        <%= f.fields_for :tasks do |i| %>
          <%= i.check_box :goal_select, class: 'rounded mr-10 p-6' %>
          <%= i.time_select :task_time, { minute_step: 15, prompt: '--' }, class:'rounded' %>
          <%= i.text_field :task, placeholder: "タスク", class: 'rounded' %>
          <%= i.text_field :memo, placeholder: "メモ", class: 'rounded' %>
        <% end %>
          <button class="add-btn rounded ml-10 font-bold" type="button">+</button>
          <button class="remove-btn rounded font-bold" type="button" style="display: none;">-</button>
        </div>
      </div>
    </div>
    <div class="flex justify-center p-8">
      <button class="btn btn-accent" type="submit">スケジュールを保存する</button>
    </div>
  <% end %>
</main>


<script>
  $(document).ready(function() {
    // +ボタンをクリックした時の処理
    $('.add-btn').click(function() {
      var $clone = $(this).closest('.form-group').clone(true);
      $clone.find('input').val(''); // 入力値をクリア
      $clone.find('.add-btn').removeClass('fa-plus').addClass('fa-minus'); // +ボタンを-ボタンに変更
      $clone.find('.remove-btn').show(); // 新しい行の-ボタンを表示
      $('.form-container').append($clone);
    });

    // -ボタンをクリックした時の処理
    $(document).on('click', '.remove-btn', function() {
      $(this).closest('.form-group').remove();
    });
  });
</script>
